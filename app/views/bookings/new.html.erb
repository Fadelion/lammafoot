<h1>Bookings#new</h1>
<p>Find me in app/views/bookings/new.html.erb</p>



<%= render partial: "form", locals: { bookings: "Creer une nouvelle reservation" }  %>

<%= link_to 'Retour index', bookings_path %>


<!--- pour le views--->
<div class="container py-5">
  <div class="row">
    <div class="col-md-8 offset-md-2">
      <div class="card">
        <div class="card-header">
          <h2>Réserver le terrain: <%= @pitch.name %></h2>
        </div>
        <div class="card-body">
          <%= simple_form_for([@pitch, @booking]) do |f| %>
            <div class="row">
              <div class="col-md-6">
                <%= f.input :start_time, as: :string, 
                            input_html: { 
                              class: 'datetimepicker',
                              data: { 
                                controller: 'flatpickr',
                                flatpickr_enable_time: true,
                                flatpickr_min_date: Time.current,
                              } 
                            } %>
              </div>
              <div class="col-md-6">
                <%= f.input :end_time, as: :string, 
                            input_html: { 
                              class: 'datetimepicker',
                              data: { 
                                controller: 'flatpickr',
                                flatpickr_enable_time: true,
                                flatpickr_min_date: Time.current,
                              } 
                            } %>
              </div>
            </div>
            
            <%= f.input :player_count, label: 'Nombre de joueurs', collection: 4..22 %>
            
            <hr>
            
            <h4>Paiement</h4>
            
            <!-- Formulaire de paiement avec Stripe Elements -->
            <div class="mb-3" data-controller="payment">
              <div class="form-group">
                <label>Numéro de carte</label>
                <div id="card-element" class="form-control"></div>
                <div id="card-errors" role="alert" class="text-danger mt-2"></div>
              </div>
              
              <div class="d-flex justify-content-between align-items-center mb-3">
                <div>
                  <span class="font-weight-bold">Durée:</span>
                  <span data-target="payment.duration">0</span> heures
                </div>
                <div>
                  <span class="font-weight-bold">Total:</span>
                  <span data-target="payment.total"><%= humanized_money(@pitch.price_per_hour) %></span>
                </div>
              </div>
            </div>
            
            <%= f.submit "Confirmer et payer", class: 'btn btn-primary btn-block' %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>